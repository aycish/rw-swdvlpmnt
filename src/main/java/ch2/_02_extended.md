# 입출금 내역 분석기 확장판

---

## [프로젝트 목표]

- 코드 베이스의 유연성을 추가하고, 유지 보수성을 개선할 수 있도록 개방/폐쇄 원칙 (OCP)를 학습한다.
- 인터페이스를 언제 사용해야 좋은지 일반적인 가이드 라인을 학습한다.
- 높은 결합도를 피할 수 있는 기법을 학습한다.
- API에 예외를 포함하거나 포함하지 않을지를 포함하는 예외 처리 방법을 배운다.
- Gradle과 같은 검증된 빌드 도구를 활용하는 방안을 학습한다.

# [2022-09-27]

## 요구사항

- 특정 입출금 내역을 검색할 수 있는 기능. 예를 들어, 주어진 날짜 범위 또는 특정 범주의 입출금 내역 얻기
- 검색 결과의 요약 통계를 텍스트, HTML등 다양한 형식으로 만들기.

## 구현 내용
- 함수형 인터페이스를 통한 OCP 적용
- 세밀하지 않은 인터페이스를 통해 갓 인터페이스 구현을 방지하여 피해 안티 응집도 문제 해결
- 도메인 객체 사용 -> DTO로 이미 구현
- 다양한 형식으로 내보내기 위해 반환값 설정


## 학습 내용

### 개방/폐쇄 원칙
- 코드 베이스의 변경이 없어도, 확장성은 개방되야한다는 원칙
- BankTransactionFilter라는 함수형 인터페이스를 통해, OCP 적용

### 갓 인터페이스
- BankTransactionProcessor에 Filter를 적용하여 OCP를 확보하였으나, 기존 2장에서 구현한 다른 세개의 메서드가 문제가된다.
- 클래스가 API 역할을 한다고 보았을 때, 한 인터페이스에 모든 기능이 추가된 **갓 인터페이스**로 볼 수 있어 주의해야한다.
- 보통 작은 인터페이스를 권장한다.
  - 구현 클래스는 인터페이스에서 정의한 모든 연산의 구현 코드를 제공해야한다. 따라서 인터페이스를 바꾸면, 구현 코드도 갱신해야하고, 검증해야하는 범위도 넓어지게되기 때문
  - totalInMonth, top3등 인터페이스가 도메인 객체의 특정 접근자에 종속되는 문제가 생겼다. 도메인 객체의 세부 내용이 변경되면 인터페이스도 변경되야 하며 결과적으로 구현 코드도 변경해야 되기 때문

### 명시적 API vs 암묵적 API 제공 문제

- 일반적인 메서드를 쉽게 정의할 수 있는 상황에서 특정 상황에 구체적인 메서드를 정의해야하는지 고민되는 딜레마를 **명시적 API vs 암묵적 API 제공 문제**라고 한다.
- 특정 상황에 국한되어 각 상황에 맞는 새로운 메서드를 많이 만들어야하는 상황이 발생할 수 있다.
- 일반적인 메서드를 선언해 둔다면, 처음 사용하기가 어렵고, 문서화를 잘 해놓아야 한다.
- 자주 사용하는 연산이라면, 이를 명시적 API로 만드는것이 합리적이나 일반적인 메서드를 선언하도록 노력해보자.

### 도메인 객체 소개

- 숫자 반환 값 : 기능 변경에 따른 유연성이 떨어지며 검증해야하는 범위가 늘어난다.
- 컬렉션 : 컬렉션 결과 반환이라는 제약이 생긴다.
- 도메인 객체 : 자신의 도메인과 관련된 클래스의 인스턴스로, 결합도를 깰 수 있으며 새로운 요구사항이 생겨서 추가 정보를 내보내야 한다면 기존 코드를 변경할 필요 없이 새로운 클래스의 일부로 이를 구현할 수 있다.
- void 반환 형식은 인터페이스로부터 얻을 수 있는 정보가 없으며, 관련 테스트를 작성하기 어려우므로 특정 기능을 수행해야한다면 반환값을 적절히 설정하자.


